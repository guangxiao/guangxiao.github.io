---
layout: post
title: 引擎如何对作用域查询的
date: 2019-02-25 11:31:20
tags: JavaScript
categories: JavaScript
---

编译器在编译过程的第二步生成了代码，引擎执行它的时候。

会通过查找变量 `a` 来判断它是否已声明过。查找的过程由作用域协助。

引擎的查找分为 `LHS`和`RHS`，`L`和`R`分别代表左侧和右侧，换句话说，当变量出现在赋值操作的左侧的时候进行`LHS`，出现在右侧的时候进行`RHS`

更准确点，`RHS`查询与简单地查找某一个变量的值一样，而`LHS`查询则是试图找到变量的容器本身，从而可以对它赋值。


### 例如

```js
console.log(a)
```

这里对 `a` 的引用是一个 `RHS`，因为这里 `a` 并没有赋值操作，只需要找到 `a`的值

```js
a = 2
```
则是一个 `LHS`的引用，这里只想 为`= 2` 这个赋值操作找到一个目标

### 小测验1

```js
function foo( a ) {
    console.log( a )
}
foo( 2 )
```

这里面的 `RHS` 有 

- 对 foo 进行 RHS 引用
- 隐式赋值 a = 2，是一个 LHS查询
- 然后 对 a 的RHS 引用
- 对 console 对象进行 RHS 查询

### 小测验2

这里面有几个 LHS（3处），有几个RHS（四处）
```js
function foo( a ){
    var b = a;
    return a + b
}
var c = foo( 2 )
```


总的理解下来，感觉 `RHS` 类似 `getter`，`LHS` 类似 `setter`

作用域就是一套规则，用于确定在何处以及如何查找变量（标识符）。如果找到的目的是对变量进行赋值，那么就会进行 `LHS`；如果目的是获取变量的值，就会使用 `RHS` 查询

